"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[715],{3295:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(6455),s=n.n(a);const i={mixins:[n(475).Z],data:function(){return{iCrNo:0,sFundSource:"",aEntryDetails:[]}},mounted:function(){this.initThisLibEventListener()},methods:{showViewDetailsModal:function(){s().fire({width:700,html:this.buildInfoTable(),showCancelButton:!1,showCloseButton:!0,showConfirmButton:!1,focusConfirm:!1,confirmButtonText:'<i class="fa fa-check"></i> Okay got it',confirmButtonAriaLabel:"Save",cancelButtonText:'<i class="fa fa-times"></i> Close',cancelButtonAriaLabel:"Cancel"})},buildInfoTable:function(){var t='\n            <div class="panel panel-colorbox-open panel-info col-md-12" id="spy2">\n            <br>\n            <div class="panel-heading">\n              <div class="panel-title hidden-xs">\n                <span class="fa fa-list-alt"></span>Transaction\'s Current Details\n              </div>\n            </div>\n            <div class="panel-body pn">\n              <div style="margin: 0%; font-size: 15px">\n                <table class="table table-bordered mbn" cellspacing="0" width="60%" style="margin-top: 3%;">\n                  <tbody>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Sys ID</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.temp_id+'</td>\n                    </tr>\n                  </tbody>\n                </table>\n                <table class="table table-bordered mbn" cellspacing="0" width="60%" style="margin-top: 3%;">\n                  <tbody>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Date of Transaction</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.transact_date+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Date/Time Encoded</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.date_created+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Date/Time Last Modified</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.date_modified+'</td>\n                    </tr>\n                  </tbody>\n                </table>\n                <br>\n                <table class="table table-bordered mbn" cellspacing="0" width="60%">\n                  <tbody>\n                    <tr v-if="sSheetFundType !== \'ps\'">\n                      <th style="text-align: left; width: 35%">OR Number</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.or_number+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Responsibility Center Code</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.region_abbr+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Fund Source Details</th>\n                      <td style="text-align: left;">\n                        <b>ORS No.:</b>'+this.sFundSource+"<br>\n                        <b>DV No.:</b> "+this.aEntryDetails.fs_dv_no+"<br>\n                        <b>ADA/Check No.:</b> "+this.aEntryDetails.fs_cpo_no+'\n                      </td>\n                    </tr>\n                    <tr v-if="sSheetFundType !== \'ps\'">\n                      <th style="text-align: left; width: 35%">Payee\'s Details</th>\n                      <td style="text-align: left;">\n                        <b>Name:</b> '+this.aEntryDetails.payee_name+"<br>\n                        <b>TIN:</b> "+this.aEntryDetails.payee_tin+"<br>\n                        <b>Address:</b> "+this.aEntryDetails.payee_address+'<br>\n                      </td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Nature of Payment Details</th>\n                      <td style="text-align: left;">\n                        <b>UACS Object Code:</b> '+this.aEntryDetails.uacs_code+"<br>\n                        <b>Description:</b> "+this.aEntryDetails.uacs_desc+' <br>\n                      </td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Tax Type:</th>\n                      <td style="text-align: left;">'+this.aEntryDetails.tcl_desc+'</td>\n                    </tr>\n                  </tbody>\n                </table>\n                <br>\n                <table class="table table-bordered mbn" cellspacing="0" width="60%">\n                  <tbody>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Gross Amount</th>\n                      <td style="text-align: right;">'+this.convertNumberFormat(this.aEntryDetails.gross_amount)+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Tax Amount</th>\n                      <td style="text-align: right;">'+this.convertNumberFormat(this.aEntryDetails.tax_amount)+'</td>\n                    </tr>\n                    <tr>\n                      <th style="text-align: left; width: 35%">Net Amount</th>\n                      <td style="text-align: right;">'+this.convertNumberFormat(this.aEntryDetails.net_amount)+"</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n            ";return"sdor"===this.$root.aUserInfo.type&&(t+='<button type="button" class="btn btn-lg btn-warning" data-action="edit-entry">\n                <i class="fa fa-pencil-square-o"></i> Go to Edit details Page\n                </button>'),t},getEntryDetails:function(t){var e=this;this.getRequest("sdor/get-entry-details/"+t,(function(t){e.aEntryDetails=t.data[0],e.iCrNo=e.aEntryDetails.cr_no,e.sFundSource=e.aEntryDetails.fs_ors_no+" ("+e.aEntryDetails.fs_desc+")",e.showViewDetailsModal()}))},initThisLibEventListener:function(){var t=this;document.body.addEventListener("click",(function(e){e.preventDefault(),"view-entry-details"===e.target.dataset.action&&t.getEntryDetails(e.target.dataset.id),"edit-entry"===e.target.dataset.action&&(window.location.href="/front/sdor/view-entry-details/"+t.iCrNo)}),!1)}}}},4512:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(3645),s=n.n(a)()((function(t){return t[1]}));s.push([t.id,".error_msg[data-v-6eae2cca]{color:red;margin-top:5px}",""]);const i=s},2715:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Nt});var a=n(821),s=function(t){return(0,a.dD)("data-v-6eae2cca"),t=t(),(0,a.Cn)(),t},i={id:"main"},l={id:"content_wrapper"},r={id:"topbar",class:"alt"},o={class:"topbar-left"},d={class:"breadcrumb"},c=s((function(){return(0,a._)("li",{class:"crumb-trail"}," Cash Management ",-1)})),u=s((function(){return(0,a._)("li",{class:"crumb-trail"}," Manage Sheet",-1)})),h={class:"crumb-link"},f={href:"#"},y=s((function(){return(0,a._)("li",{class:"crumb-active"},[(0,a._)("a",null,"Sheet Details")],-1)})),m={class:"panel"},b=s((function(){return(0,a._)("div",{class:"panel-heading"},[(0,a._)("span",{class:"panel-title"}," View Sheet Details "),(0,a._)("a",{href:"/front/sdor/view-entry-summary","data-attr":"href",class:"btn btn-md btn-primary pull-right",style:{"margin-top":"0.5%"}},[(0,a._)("i",{class:"fa fa-arrow-left"}),(0,a.Uk)(" Go back to Summary of Sheets ")])],-1)})),_={class:"panel-body"},g={class:"col-md-5",style:{"margin-bottom":"5px"}},p={class:"table table-bordered mbn",id:"tbl_cash_reg_summary",cellspacing:"0",width:"60%"},v=s((function(){return(0,a._)("th",{style:{"text-align":"left",width:"40%"}},"Sheet No: ",-1)})),w={style:{"text-align":"left"}},x=s((function(){return(0,a._)("th",{style:{"text-align":"left",width:"40%"}},"Responsibility Center Code: ",-1)})),S={style:{"text-align":"left"}},D=s((function(){return(0,a._)("th",{style:{"text-align":"left",width:"40%"}},"Status: ",-1)})),T={style:{"text-align":"left"}},k=s((function(){return(0,a._)("th",{style:{"text-align":"left",width:"40%"}},"Last Updated On: ",-1)})),E={style:{"text-align":"left"}},C={class:"col-md-12"},N={class:"panel panel-visible",id:"spy2"},A=s((function(){return(0,a._)("br",null,null,-1)})),F={class:"panel-heading"},R={class:"panel-title hidden-xs",style:{color:"rgb(32, 32, 32)"}},L=s((function(){return(0,a._)("span",{class:"glyphicon glyphicon-tasks"},null,-1)})),z={class:"panel-body pn"},M={class:"table table-bordered mbn",id:"tbl_cash_reg_summary",cellspacing:"0",width:"100%"},O=s((function(){return(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{style:{"text-align":"center"}},"SysId"),(0,a._)("th",{style:{"text-align":"center"}},"Date"),(0,a._)("th",{style:{"text-align":"center"}},"OR Number"),(0,a._)("th",{style:{"text-align":"center"}},"Payee"),(0,a._)("th",{style:{"text-align":"center"}},"UACS Object Code"),(0,a._)("th",{style:{"text-align":"center"}},"Nature of Payment"),(0,a._)("th",{style:{"text-align":"center"}},"Gross"),(0,a._)("th",{style:{"text-align":"center"}},"Tax"),(0,a._)("th",{style:{"text-align":"center"}},"Net")])],-1)})),I={style:{"text-align":"center"}},P=["data-id"],B={style:{"text-align":"center"}},Y={style:{"text-align":"center"}},q={style:{"text-align":"left"}},U={style:{"text-align":"center"}},Z={style:{"text-align":"left"}},V={style:{"text-align":"right"}},G={style:{"text-align":"right"}},H={style:{"text-align":"right"}},W=s((function(){return(0,a._)("td",{colspan:"6",style:{"text-align":"right"}},[(0,a._)("b",null,"TOTAL:")],-1)})),j={style:{"text-align":"right"}},K={style:{"text-align":"right"}},J={style:{"text-align":"right"}},Q={class:"col-md-03"},X={class:"alert alert-default light alert-dismissable"},tt=s((function(){return(0,a._)("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"Ã—",-1)})),et=s((function(){return(0,a._)("i",{class:"fa fa-cog pr10 hidden"},null,-1)})),nt=s((function(){return(0,a._)("strong",null,"Record of Remarks/Comments:",-1)})),at=s((function(){return(0,a._)("br",null,null,-1)})),st={class:"panel-body pn",style:{"margin-top":"1%"}},it={class:"table table-bordered mbn",cellspacing:"0",width:"100%"},lt=s((function(){return(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"20%",style:{"text-align":"center"}},"Date and Time"),(0,a._)("th",{width:"20%",style:{"text-align":"center"}},"Remarks/Comment By:"),(0,a._)("th",{width:"60%",style:{"text-align":"center"}},"Remarks/Comment")])],-1)})),rt={width:"20%",style:{"text-align":"center"}},ot={width:"20%",style:{"text-align":"center"}},dt={width:"60%",style:{"text-align":"left"}},ct={class:"admin-form"},ut={key:0,class:"col-md-9"},ht=[(0,a.uE)('<div class="section" data-v-6eae2cca><label class="field prepend-icon" data-v-6eae2cca><textarea class="gui-textarea" id="txt_remarks" name="comment" placeholder="Enter your remarks here..." data-v-6eae2cca></textarea><label for="comment" class="field-icon" data-v-6eae2cca><i class="fa fa-comments" data-v-6eae2cca></i></label><span class="input-footer" data-v-6eae2cca><strong data-v-6eae2cca>Hint:</strong>You may specify the changes if for revision or provide a comment if for posting.</span></label><p id="p_remarks" class="error_msg" style="display:none;" data-v-6eae2cca>Remarks is required!</p></div>',1)],ft={key:1,class:"col-md-3"},yt=[s((function(){return(0,a._)("button",{"data-action":"revise-sheet",type:"button",class:"btn btn-block btn-warning pull-right",style:{"margin-bottom":"10px"}},[(0,a._)("i",{class:"fa fa-undo"}),(0,a.Uk)(" Re-Submit for Review ")],-1)}))],mt={key:2,class:"col-md-4"},bt=[s((function(){return(0,a._)("div",{class:"alert alert-warning"},[(0,a._)("i",{class:"fa fa-warning pr10"}),(0,a.Uk)(" Awaiting review and approval. ")],-1)}))],_t={key:3,class:"col-md-7"},gt=[s((function(){return(0,a._)("div",{class:"alert alert-info"},[(0,a._)("i",{class:"fa fa-info-circle pr10"}),(0,a.Uk)(" This sheet is already posted. All entries included in this sheet are now locked. ")],-1)}))];var pt=n(6455),vt=n.n(pt),wt=n(860),xt=n(475),St=n(3295);const Dt={mixins:[wt.Z,xt.Z,St.Z],data:function(){return{sSheetTypeLink:"",aTableConfig:{aoColumnDefs:[{bSortable:!0,aTargets:[-1]}],oLanguage:{oPaginate:{sPrevious:"",sNext:""}},iDisplayLength:5,aLengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],sDom:'<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',oTableTools:{sSwfPath:"vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf"}},aSheet:[],aSheetDetails:[],sActiveDate:"",iSheetId:0,fTotalAmount:0,sMonth:"",sSheetFundType:"",fTotalGrossAmount:0,fTotalTaxAmount:0,fTotalNetAmount:0,aRemarksHistory:[]}},mounted:function(){this.initEventListener(),this.getSheetDetails()},methods:{initEventListener:function(){var t=this;document.body.addEventListener("click",(function(e){if(e.preventDefault(),"href"===e.target.dataset.attr&&(window.location.href="/front/sdor/view-sheets/"+t.sSheetFundType),"revise-sheet"===e.target.dataset.action){t.validateSubmission("REVISED","This will resubmit all the entries included in this sheet including the comments/remarks you provided and will notify the OC for review and approval. Do you want to proceed?")}}),!1)},initTblSheets:function(){$("#tbl_cash_reg_summary").DataTable(this.aTableConfig)},getSheetDetails:function(){var t=this;this.iSheetId=this.$route.params.id,this.getRequest("sdor/get-sheets",(function(e){t.aSheet=e.data[0],t.aRemarksHistory=t.aSheet.remarks_history,t.sSheetFundType=t.aSheet.sheet_fund_type,t.setSheetTypeLink(),t.aSheetDetails=e.data[0].cash_reg_entries,t.sMonth=moment(t.aSheet.transact_date).format("MMMM YYYY"),t.computeTotalAmount()}),{sheet_id:this.iSheetId})},setSheetTypeLink:function(){"ps"===this.sSheetFundType?this.sSheetTypeLink="Personnel Services":"mooe"===this.sSheetFundType?this.sSheetTypeLink="Maintenance and Other Operating Expenses":this.sSheetTypeLink="Special Requests"},computeTotalAmount:function(){var t=this.aSheetDetails.reduce((function(t,e){return t+parseFloat(e.net_amount)}),0),e=this.aSheetDetails.reduce((function(t,e){return t+parseFloat(e.tax_amount)}),0),n=this.aSheetDetails.reduce((function(t,e){return t+parseFloat(e.gross_amount)}),0);this.fTotalGrossAmount=n.toFixed(2),this.fTotalTaxAmount=e.toFixed(2),this.fTotalNetAmount=t.toFixed(2)},validateSubmission:function(t,e){var n=$("#txt_remarks").val();""===n?(this.showErrorAlert("Remarks field is required!"),$("#p_remarks").css("display","")):($("#p_remarks").css("display","none"),this.updateSheet(t,n,e))},updateSheet:function(t,e,n){var a=this,s=this;vt().fire({title:"Confirmation",html:n,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Proceed."}).then((function(n){if(n.isConfirmed){var i={remarks:e,status:t};a.postRequest("sdor/update-sheet/"+s.iSheetId,i,(function(t){s.showSuccessAlert("Successfully updated the sheet's details"),s.getSheetDetails()}))}}))}}};var Tt=n(3379),kt=n.n(Tt),Et=n(4512),Ct={insert:"head",singleton:!1};kt()(Et.Z,Ct);Et.Z.locals;const Nt=(0,n(3744).Z)(Dt,[["render",function(t,e,n,s,$,pt){var vt=(0,a.up)("C_Layout_Header"),wt=(0,a.up)("C_Layout_SDOR_Sidebar");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(vt),(0,a.Wm)(wt),(0,a._)("section",l,[(0,a._)("header",r,[(0,a._)("div",o,[(0,a._)("ol",d,[c,u,(0,a._)("li",h,[(0,a._)("a",f,(0,a.zw)($.sSheetTypeLink),1)]),y])])]),(0,a._)("div",m,[b,(0,a._)("div",_,[(0,a._)("div",g,[(0,a._)("table",p,[(0,a._)("tbody",null,[(0,a._)("tr",null,[v,(0,a._)("td",w,(0,a.zw)(null===$.aSheet.sheet_no?"(Sheet not yet posted)":$.aSheet.sheet_no),1)]),(0,a._)("tr",null,[x,(0,a._)("td",S,(0,a.zw)($.aSheet.region_abbr),1)]),(0,a._)("tr",null,[D,(0,a._)("td",T,(0,a.zw)($.aSheet.status),1)]),(0,a._)("tr",null,[k,(0,a._)("td",E,(0,a.zw)($.aSheet.date_modified),1)])])])]),(0,a._)("div",C,[(0,a._)("div",N,[A,(0,a._)("div",F,[(0,a._)("div",R,[L,(0,a.Uk)("Period Covered: Whole Month of "+(0,a.zw)($.sMonth),1)])]),(0,a._)("div",z,[(0,a._)("table",M,[O,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.aSheetDetails,(function(e){return(0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",I,[(0,a._)("a",{href:"#","data-action":"view-entry-details","data-id":e.cr_no},(0,a.zw)(e.temp_id),9,P)]),(0,a._)("td",B,(0,a.zw)(t.convertDateFormat(e.date_created,"DD-MMM-YYYY")),1),(0,a._)("td",Y,(0,a.zw)(e.or_number),1),(0,a._)("td",q,(0,a.zw)(e.payee_name),1),(0,a._)("td",U,(0,a.zw)(e.uacs_code),1),(0,a._)("td",Z,(0,a.zw)(e.uacs_desc),1),(0,a._)("td",V,(0,a.zw)(t.convertNumberFormat(e.gross_amount)),1),(0,a._)("td",G,(0,a.zw)(t.convertNumberFormat(e.tax_amount)),1),(0,a._)("td",H,(0,a.zw)(t.convertNumberFormat(e.net_amount)),1)])})),256)),(0,a._)("tr",null,[W,(0,a._)("td",j,[(0,a._)("b",null,(0,a.zw)(t.convertNumberFormat($.fTotalGrossAmount)),1)]),(0,a._)("td",K,[(0,a._)("b",null,(0,a.zw)(t.convertNumberFormat($.fTotalTaxAmount)),1)]),(0,a._)("td",J,[(0,a._)("b",null,(0,a.zw)(t.convertNumberFormat($.fTotalNetAmount)),1)])])])])])]),(0,a._)("div",Q,[(0,a._)("div",X,[tt,et,nt,at,(0,a._)("div",st,[(0,a._)("table",it,[lt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.aRemarksHistory,(function(t){return(0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",rt,(0,a.zw)(t.date_created),1),(0,a._)("td",ot,(0,a.zw)(t.user_details.firstname)+" "+(0,a.zw)(t.user_details.lastname),1),(0,a._)("td",dt,(0,a.zw)(t.remarks),1)])})),256))])])])])])]),(0,a._)("div",ct,["FOR REVISION"===$.aSheet.status?((0,a.wg)(),(0,a.iD)("div",ut,ht)):(0,a.kq)("",!0),"FOR REVISION"===$.aSheet.status?((0,a.wg)(),(0,a.iD)("div",ft,yt)):(0,a.kq)("",!0),"OPEN"===$.aSheet.status||"REVISED"===$.aSheet.status?((0,a.wg)(),(0,a.iD)("div",mt,bt)):(0,a.kq)("",!0),"POSTED"===$.aSheet.status?((0,a.wg)(),(0,a.iD)("div",_t,gt)):(0,a.kq)("",!0)])])])])])}],["__scopeId","data-v-6eae2cca"]])}}]);