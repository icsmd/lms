"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[202],{5266:(t,e,s)=>{s.d(e,{Z:()=>r});var a=s(381),l=s.n(a),i=s(860),n=s(475);const r={mixins:[i.Z,n.Z],data:function(){return{sUserType:this.$root.getUserType(),aTableConfig:{aoColumnDefs:[{bSortable:!0,aTargets:[-1]}],oLanguage:{oPaginate:{sPrevious:"",sNext:""}},iDisplayLength:5,aLengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],sDom:'<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',oTableTools:{sSwfPath:"vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf"}},aFundTypes:[{id:1,code:"ps",desc:"Personnel Services (PS)"},{id:2,code:"mooe",desc:"Maintenance and Other Operating Expenses (MOOE)"},{id:3,code:"sr",desc:"Special Requests (SR)"}],iSelectedFund:0,aFSList:[],aRegionList:[],aSheet:[],aSheetDetails:[],fTotalGrossAmount:0,fTotalTaxAmount:0,fTotalNetAmount:0,fTotalGrossPartAmount:0,fTotalTaxPartAmount:0,fTotalParticularAmount:0,sFundCode:"",sReportNo:"",sSheetNo:"",sTitleDate:"",sCurrDate:l()().format("DD-MMM-YYYY"),sCompressedSummary:"",aFundSource:[],aSheetRecap:[],aSheetSummary:[],fSumOfSWReg:0,fSumOfSWCas:0,fSumOfOffice:0,fSumOfOthers:0,sReportType:"",sReportDetailsUrl:"",sPrintPageUrl:"",sPartDesc:""}},mounted:function(){this.initializePlugins(),this.initEventListeners(),this.getFundSourceList(),this.executeUserTypeRequests()},methods:{initializePlugins:function(t){$(".select2-single").select2(),$("#inpMonthYearTransact").monthpicker({changeYear:!1,stepYears:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',showButtonPanel:!0,beforeShow:function(t,e){var s=$(this).parents(".admin-form").attr("class");e.dpDiv.parent().hasClass(s)||e.dpDiv.wrap('<div class="'+s+'"></div>')}})},initTblSheets:function(){$("#tbl_cash_reg_summary").DataTable(this.aTableConfig)},initEventListeners:function(){var t=this;$("#inp_fund_type").on("select2:select",(function(t){"sr"===$("#inp_fund_type").val()?$("#divSRSelection").css("visibility",""):$("#divSRSelection").css("visibility","hidden")})),document.body.addEventListener("click",(function(e){e.preventDefault(),"btnGenReport"===e.target.id&&t.validateFilter(),"btnPrintReport"===e.target.id&&t.prepareReport()}),!1),$("#txt_particular").keyup((function(e){t.sPartDesc=$("#txt_particular").val()}))},prepareReport:function(){var t=Object.assign({},this.aSheetDetails,{date_details:{title_date:this.sTitleDate,curr_date:this.sCurrDate}});"cash-reg-liquidation"===this.sReportType&&(t=Object.assign({},t,{sPartDesc:this.sPartDesc})),this.sCompressedSummary=btoa(JSON.stringify(t)),this.$root.setLocalStorageValue("forEx",this.sCompressedSummary),window.open(this.sPrintPageUrl,"_blank")},validateFilter:function(){var t,e,s,a=!0,l=$("#inp_fund_type").val(),i=$("#inpMonthYearTransact").val();""===i&&(a=!1,this.showErrorAlert("Month-Year is Required!")),null==l?(a=!1,this.showErrorAlert("Type is Required!")):"sr"===l&&null==(e=$("#inp_sr").val())&&(a=!1,this.showErrorAlert("Request Reference is Required!")),"sdor"!==this.sUserType&&null==(s=$("#inp_office").val())&&(a=!1,this.showErrorAlert("Office is Required!")),!0===a&&(t={sheet_fund_type:l,transact_month:i.split("/")[0],transact_year:i.split("/")[1]},t="sr"===l?Object.assign({},t,{fs_id:e}):t,t="sdor"!==this.sUserType?Object.assign({},t,{region_id:s}):t,this.getDateValues(),this.getReportDetails(t))},getDateValues:function(){var t=$("#inpMonthYearTransact").val(),e=t.split("/")[0],s=t.split("/")[1],a=e+"-01-"+s,i=l()(a).endOf("month").format("DD");this.sTitleDate="01-"+i+" "+l()(a).format("MMMM")+" "+s},executeUserTypeRequests:function(){"sdor"!==this.sUserType&&($("#divInpOffice").css("visibility",""),this.getRegionList())},getRegionList:function(){this.aRegionList=this.$root.parseLocalStorageLib().regions},getReportDetails:function(t){var e=this;this.getRequest(this.sReportDetailsUrl,(function(t){var s=t.data;0===s.length?(e.resetDisplayTable(),e.showErrorAlert("No available data to load!"),$(".tbl-empty").css("display",""),$(".tbl-with-content").css("display","none"),$("#btnPrintReport").attr("disabled",!0),$("#btnPrintReport").attr("class","btn btn-default btn-gradient dark btn-lg"),"cash-reg-liquidation"===e.sReportType&&(document.getElementById("txt_particular").readOnly=!0)):($(".tbl-with-content").css("display",""),$(".tbl-empty").css("display","none"),$("#btnPrintReport").attr("disabled",!1),$("#btnPrintReport").attr("class","btn btn-success btn-gradient dark btn-lg"),e.aSheetDetails=s,e.reportLayoutSetter(s))}),t)},resetDisplayTable:function(){this.aSheetDetails=[],this.fTotalGrossAmount=0,this.fTotalTaxAmount=0,this.fTotalNetAmount=0,this.fTotalParticularAmount=0},reportLayoutSetter:function(t){this.sTitleDate=void 0===t.date_details?this.sTitleDate:t.date_details.title_date,this.sCurrDate=void 0===t.date_details?this.sCurrDate:t.date_details.curr_date,"cash-reg-report"===this.sReportType?(this.sReportNo=t.sheet_details.report_no,this.sSheetNo=t.sheet_details.sheet_no,this.sFundCluster=t.sheet_details.fund_desc+" ("+t.sheet_details.fund_code+")",this.computeTotalAmount()):"cash-reg-record"===this.sReportType?(this.aFundSource=t.fund_source[0],this.aSheetRecap=t.sheet_recap,this.aSheetSummary=t.sheet_summary):"cash-reg-register"===this.sReportType?(this.aFundSource=t.fund_source[0],this.aSheetRecap=t.sheet_recap,this.aSheetSummary=t.sheet_summary,this.computeSummation()):"cash-reg-liquidation"===this.sReportType&&("SCMS | Print Liquidation Form"===document.title?(this.aSheetSummary=t.sheet_summary,console.log(t.sPartDesc),this.sPartDesc=t.sPartDesc):(this.aSheetSummary=t.sheet_summary,this.sPartDesc=this.aSheetSummary.fs_desc,document.getElementById("txt_particular").readOnly=!1,$("#txt_particular").text(this.sPartDesc)))},getFundSourceList:function(){var t=this;this.getRequest("fund-source/get-list",(function(e){t.aFSList=e.data}),{fs_type:"sr",fs_status:"RELEASED"})},computeTotalAmount:function(){var t=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.net_amount)}),0),e=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.tax_amount)}),0),s=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.gross_amount)}),0),a=this.aSheetDetails.sheet_recap.reduce((function(t,e){return t+parseFloat(e.gross_total)}),0),l=this.aSheetDetails.sheet_recap.reduce((function(t,e){return t+parseFloat(e.tax_total)}),0),i=this.aSheetDetails.sheet_recap.reduce((function(t,e){return t+parseFloat(e.net_total)}),0);this.fTotalGrossAmount=s.toFixed(2),this.fTotalTaxAmount=e.toFixed(2),this.fTotalNetAmount=t.toFixed(2),this.fTotalGrossPartAmount=a.toFixed(2),this.fTotalTaxPartAmount=l.toFixed(2),this.fTotalParticularAmount=i.toFixed(2)},computeSummation:function(t){var e=this;this.aSheetDetails.sheet_entries.forEach((function(t){"5-01-010-1000"===t.uacs_code?e.fSumOfSWReg+=parseFloat(t.net_amount):"5-01-010-2000"===t.uacs_code?e.fSumOfSWCas+=parseFloat(t.net_amount):"5-02-03-010"===t.uacs_code?e.fSumOfOffice+=parseFloat(t.net_amount):e.fSumOfOthers+=parseFloat(t.net_amount)}))},parseCompressedData:function(){var t=this.$root.getLocalStorageValue("forEx");this.aSheetDetails=JSON.parse(atob(t)),this.reportLayoutSetter(this.aSheetDetails)},printReport:function(){var t=document.getElementById("printableDiv").outerHTML,e=document.body.innerHTML;document.body.innerHTML=t,window.print(),document.body.innerHTML=e}}}},202:(t,e,s)=>{s.r(e),s.d(e,{default:()=>bt});var a=s(821),l={id:"content_wrapper"},i=(0,a.uE)('<header id="topbar" class="alt"><div class="topbar-left"><ol class="breadcrumb"><li class="crumb-trail"> Financial Reports </li><li class="crumb-active"><a>Liquidation</a></li></ol></div></header>',1),n={class:"panel"},r=(0,a._)("div",{class:"panel-heading"},[(0,a._)("span",{class:"panel-title"},"Liquidation Report")],-1),o={class:"panel-body"},u={class:"col-md-12"},c={class:"form-group"},d={class:"col-md-4"},p={class:"select2-single form-control",id:"inp_fund_type"},h=(0,a._)("option",{disabled:"",value:"0",selected:""},"Please select type",-1),_=["value"],f=(0,a._)("p",{id:"p_fund_type",style:{display:"none"},class:"error_msg"},"Please select a Fund Type! ",-1),m=(0,a.uE)('<div class="col-md-3"><div class="admin-form mw1000 center-block"><label for="monthpicker1" class="field prepend-icon"><input type="text" id="inpMonthYearTransact" name="inpMonthYearTransact" class="gui-input" placeholder="Enter month and year" readonly style="height:38px;"><label class="field-icon"><i class="fa fa-calendar-o"></i></label></label></div></div><div class="col-md-5"><button id="btnGenReport" type="button" class="btn btn-primary btn-gradient dark btn-md"><i class="fa fa-download"></i> Generate Report </button>   <button id="btnPrintReport" type="button" class="btn btn-default btn-gradient dark btn-md" disabled><i class="fa fa-file-pdf-o"></i> Print Report </button></div>',2),b={class:"col-md-12",style:{"margin-top":"10px"}},y={class:"form-group"},g={id:"divSRSelection",class:"col-md-4",style:{visibility:"hidden"}},S={class:"select2-single form-control",id:"inp_sr"},v=(0,a._)("option",{disabled:"",value:"0",selected:""},"Please select Special Request",-1),T=["value"],D={id:"divInpOffice",class:"col-md-3",style:{visibility:"hidden"}},x={class:"select2-single form-control",id:"inp_office"},R=(0,a._)("option",{disabled:"",value:"0",selected:""},"Please select office",-1),P=["value"],w=(0,a._)("p",{id:"p_fund_type",style:{display:"none"},class:"error_msg"},"Please select a Fund Type! ",-1),F=(0,a.uE)('<div class="col-md-10" style="margin-top:1%;"><div class="admin-form"><div class="section"><label class="field prepend-icon"><textarea class="gui-textarea" id="txt_particular" name="comment" placeholder="Enter particular description..." readonly></textarea><label for="comment" class="field-icon"><i class="fa fa-comments"></i></label><span class="input-footer"><strong>Note:</strong> The text displayed here will also be used for printing the report.</span></label><p id="p_remarks" class="error_msg" style="display:none;">Remarks is required!</p></div></div></div>',1),O={class:"col-md-10"},A={class:"panel panel-colorbox-open panel-dark",id:"spy2"},L=(0,a._)("br",null,null,-1),E={class:"panel-heading"},k={class:"panel-title hidden-xs",style:{color:"rgb(255, 255, 255)"}},U=(0,a._)("span",{class:"glyphicon glyphicon-tasks"},null,-1),$={class:"panel-body pn"},N=(0,a._)("table",{class:"table table-bordered mbn tbl-empty",cellspacing:"0",width:"100%"},[(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",{colspan:"2",style:{"font-size":"20px","text-align":"center"}},[(0,a._)("p",null,[(0,a._)("br"),(0,a.Uk)("No Data Available"),(0,a._)("br"),(0,a._)("br")])])])])],-1),C={class:"table table-bordered mbn tbl-with-content",id:"tbl_cash_reg_summary",cellspacing:"0",width:"50%",style:{display:"none"}},M=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{style:{"text-align":"center"}},"Particulars"),(0,a._)("th",{style:{"text-align":"center"}},"Amount")])],-1),q={width:"60%",style:{"text-align":"left"}},z=(0,a._)("br",null,null,-1),Y=(0,a._)("br",null,null,-1),H=(0,a._)("br",null,null,-1),G=(0,a._)("br",null,null,-1),j=(0,a._)("br",null,null,-1),B=(0,a._)("br",null,null,-1),I=(0,a._)("br",null,null,-1),V=(0,a._)("br",null,null,-1),W={style:{"text-align":"right","font-size":"15px"}},Z=(0,a._)("br",null,null,-1),K=(0,a._)("br",null,null,-1),J=(0,a._)("br",null,null,-1),Q=(0,a._)("br",null,null,-1),X=(0,a._)("span",{class:"pull-left"},"Php",-1),tt=(0,a._)("br",null,null,-1),et=(0,a._)("br",null,null,-1),st=(0,a._)("br",null,null,-1),at=(0,a._)("br",null,null,-1),lt=(0,a._)("td",{style:{"text-align":"left"}},"TOTAL AMOUNT SPENT",-1),it={style:{"text-align":"right","font-size":"15px"}},nt=(0,a._)("span",{class:"pull-left"},"Php",-1),rt={style:{"text-align":"left"}},ot={style:{"text-align":"right","font-size":"15px"}},ut=(0,a._)("span",{class:"pull-left"},"Php",-1),ct=(0,a._)("td",{style:{"text-align":"left"}},"AMOUNT REFUNDED PER OR NO. ______ DTD. _______ ",-1),dt={style:{"text-align":"right","font-size":"15px"}},pt=(0,a._)("span",{class:"pull-left"},"Php",-1),ht=(0,a._)("td",{style:{"text-align":"left"}},"AMOUNT TO BE REIMBURSED",-1),_t={style:{"text-align":"right","font-size":"15px"}},ft=(0,a._)("span",{class:"pull-left"},"Php",-1);const mt={mixins:[s(5266).Z],created:function(){this.sReportType="cash-reg-liquidation",this.sReportDetailsUrl="report/liquidation-report",this.sPrintPageUrl="/front/sdor/report/liquidation/print"}};const bt=(0,s(3744).Z)(mt,[["render",function(t,e,s,mt,bt,yt){var gt=(0,a.up)("C_Layout_Header"),St=(0,a.up)("C_Layout_SDOR_Sidebar"),vt=(0,a.up)("C_Layout_ACTG_Sidebar");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(gt),"sdor"===t.sUserType?((0,a.wg)(),(0,a.j4)(St,{key:0})):"actg"===t.sUserType?((0,a.wg)(),(0,a.j4)(vt,{key:1})):(0,a.kq)("",!0),(0,a._)("section",l,[i,(0,a._)("div",n,[r,(0,a._)("div",o,[(0,a._)("div",u,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("select",p,[h,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.aFundTypes,(function(t){return(0,a.wg)(),(0,a.iD)("option",{value:t.code},(0,a.zw)(t.desc),9,_)})),256))]),f]),m])]),(0,a._)("div",b,[(0,a._)("div",y,[(0,a._)("div",g,[(0,a._)("select",S,[v,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.aFSList,(function(t){return(0,a.wg)(),(0,a.iD)("option",{value:t.fs_id},(0,a.zw)(t.cpo_no)+" ("+(0,a.zw)(t.fs_desc)+") ",9,T)})),256))])]),(0,a._)("div",D,[(0,a._)("select",x,[R,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.aRegionList,(function(t){return(0,a.wg)(),(0,a.iD)("option",{value:t.region_id},(0,a.zw)(t.region_abbr)+" ("+(0,a.zw)(t.region_desc)+")",9,P)})),256))]),w])])]),F,(0,a._)("div",O,[(0,a._)("div",A,[L,(0,a._)("div",E,[(0,a._)("div",k,[U,(0,a.Uk)("Period Covered "+(0,a.zw)(t.sTitleDate),1)])]),(0,a._)("div",$,[N,(0,a._)("table",C,[M,(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("td",q,[z,Y,H,G,(0,a.Uk)((0,a.zw)(t.sPartDesc),1),j,B,I,V]),(0,a._)("td",W,[Z,K,J,Q,(0,a._)("b",null,[X,(0,a.Uk)("  "+(0,a.zw)(t.convertNumberFormat(t.aSheetSummary.total_expenses)),1)]),tt,et,st,at])]),(0,a._)("tr",null,[lt,(0,a._)("td",it,[(0,a._)("b",null,[nt,(0,a.Uk)(" "+(0,a.zw)(t.convertNumberFormat(t.aSheetSummary.total_expenses)),1)])])]),(0,a._)("tr",null,[(0,a._)("td",rt,"AMOUNT OF CASH ADVANCE PER DV NO. "+(0,a.zw)(t.aSheetSummary.dv_no)+" DTD._____",1),(0,a._)("td",ot,[(0,a._)("b",null,[ut,(0,a.Uk)("  "+(0,a.zw)(t.convertNumberFormat(t.aSheetSummary.total_cash)),1)])])]),(0,a._)("tr",null,[ct,(0,a._)("td",dt,[(0,a._)("b",null,[pt,(0,a.Uk)(" "+(0,a.zw)(t.convertNumberFormat(t.aSheetSummary.total_coh)),1)])])]),(0,a._)("tr",null,[ht,(0,a._)("td",_t,[(0,a._)("b",null,[ft,(0,a.Uk)(" "+(0,a.zw)(t.convertNumberFormat(t.aSheetSummary.total_reimburse)),1)])])])])])])])])])])])],64)}]])}}]);