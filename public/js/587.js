"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[587],{3587:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var s=a(821),n={id:"main"},i={id:"content_wrapper"},l=(0,s.uE)('<header id="topbar" class="alt"><div class="topbar-left"><ol class="breadcrumb"><li class="crumb-trail"> Cash Management </li><li class="crumb-trail"> Manage Sheet </li><li class="crumb-active"><a>Special Requests</a></li></ol></div></header>',1),r={class:"panel"},o=(0,s._)("div",{class:"panel-heading"},[(0,s._)("span",{class:"panel-title"},"Manage Cash Disbursement Sheets for Special")],-1),c={class:"panel-body"},d={class:"col-md-12"},u={class:"panel panel-colorbox-open panel-system",id:"spy2"},h=(0,s._)("br",null,null,-1),f=(0,s._)("div",{class:"panel-heading"},[(0,s._)("div",{class:"panel-title hidden-xs"},[(0,s._)("span",{class:"fa fa-plus-square-o"}),(0,s.Uk)("Create SR Sheet ")])],-1),p={class:"panel-body pn"},_={class:"form-group",id:"divInpTransactMY",style:{margin:"1%"}},b={class:"admin-form mw1000 left-block"},v=(0,s.uE)('<div class="col-md-5 section"><label class="field prepend-icon"><textarea class="gui-textarea" id="txt_remarks" name="comment" placeholder="Enter your remarks here..."></textarea><label for="comment" class="field-icon"><i class="fa fa-comments"></i></label><span class="input-footer"><strong>Hint: </strong>Provide a short description about this sheet. (Optional)</span></label></div>',1),g={class:"col-md-4"},m=(0,s._)("option",{disabled:"",value:"0",selected:""},"Please select ORS/BURS/DV No.",-1),S=["value"],y=(0,s.uE)('<div class="col-md-3"><label for="monthpicker1" class="field prepend-icon"><input type="text" id="inpMonthYearTransact" name="inpMonthYearTransact" class="gui-input" placeholder="Enter month and year" readonly><label class="field-icon"><i class="fa fa-calendar-o"></i></label></label><button id="btnSRCreateSheet" type="button" class="btn btn-system btn-gradient dark btn-block" style="margin-top:5%;"><i class="fa fa-plus-square-o"></i> Create Sheet (SR) </button></div>',1),w={class:"col-md-12"},x={class:"panel panel-colorbox-open panel-dark",id:"spy2"},R=(0,s._)("br",null,null,-1),T=(0,s._)("div",{class:"panel-heading"},[(0,s._)("div",{class:"panel-title hidden-xs"},[(0,s._)("span",{class:"glyphicon glyphicon-tasks"}),(0,s.Uk)("Cash Disbursement Sheets for Special Requests ")])],-1),C={class:"panel-body pn"},D={class:"table table-striped table-hover",id:"tbl_SR_sheets",cellspacing:"0",width:"100%"},k=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{style:{"text-align":"center"}},"SysId"),(0,s._)("th",{style:{"text-align":"center"}},"Sheet No"),(0,s._)("th",{style:{"text-align":"center"}},"Accounting Period"),(0,s._)("th",{style:{"text-align":"center"}},"Status"),(0,s._)("th",{style:{"text-align":"center"}},"Date Created"),(0,s._)("th",{style:{"text-align":"center"}},"Action")])],-1),Y={style:{"text-align":"center"}},E={style:{"text-align":"center"}},M={style:{"text-align":"center"}},L={style:{"text-align":"center"}},B={style:{"text-align":"center"}},P={style:{"text-align":"center"}},F=["data-sheet_id"],q=(0,s._)("i",{class:"fa fa-arrow-circle-o-right"},null,-1),z=["data-sheet_id"],A=(0,s._)("i",{class:"fa fa-trash"},null,-1),O={key:1,type:"button",class:"btn btn-md btn-default",disabled:""},U=(0,s._)("i",{class:"fa fa-trash"},null,-1);var N=a(6455),H=a.n(N),I=a(860),V=a(475);const Z={mixins:[I.Z,V.Z],data:function(){return{bSRSheetExist:!1,aTableConfig:{aaSorting:[[0,"desc"]],aoColumnDefs:[{bSortable:!1,aTargets:[5]}],oLanguage:{oPaginate:{sPrevious:"",sNext:""}},iDisplayLength:10,aLengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],sDom:'<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',oTableTools:{sSwfPath:"vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf"}},aPSsheets:[],aMOOEsheets:[],aSRsheets:[],sActiveDate:"",aFundSourceList:[],iSelectedFs:0}},mounted:function(){this.initializePlugins(),this.getFundSourceList(),this.getSRSheets(),this.initCreateButtonEventListener()},methods:{initializePlugins:function(){$(".select2-single").select2(),$("#inpMonthYearTransact").monthpicker({changeYear:!1,stepYears:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',showButtonPanel:!0,beforeShow:function(e,t){var a=$(this).parents(".admin-form").attr("class");t.dpDiv.parent().hasClass(a)||t.dpDiv.wrap('<div class="'+a+'"></div>')}})},initCreateButtonEventListener:function(){var e=this;document.body.addEventListener("click",(function(t){t.preventDefault(),"btnSRCreateSheet"===t.target.id&&e.validateSheetCreation()}),!1)},validateSheetCreation:function(){var e=$("#inpMonthYearTransact").val();null===$("#inp_fund_source").val()?this.showErrorAlert("The ORS/BURS/DV No. is Required!"):""===e?this.showErrorAlert("Month and Year is Required!"):this.createSheet(e)},initTblSRSheets:function(){$("#tbl_SR_sheets").DataTable(this.aTableConfig),$(".dataTables_filter input").attr("placeholder","Enter Terms...")},initTableEventListener:function(){var e=this;document.body.addEventListener("click",(function(t){t.preventDefault(),"viewDetails"===t.target.dataset.attr&&(window.location.href="/front/sdor/view-sheet-details/"+t.target.dataset.sheet_id),"deleteSheet"===t.target.dataset.attr&&e.deleteRecord(t.target.dataset.sheet_id)}),!1)},getFundSourceList:function(){var e=this;this.getRequest("fund-source/get-list",(function(t){e.aFundSourceList=t.data}),{fs_type:"sr"})},getSRSheets:function(){var e=this,t=this;this.getRequest("sdor/get-sheets",(function(a){e.aSRsheets=a.data,setTimeout((function(){t.initTblSRSheets()}),500),setTimeout((function(){t.initTableEventListener()}),500)}),{sheet_fund_type:"sr"})},createSheet:function(e){var t=this,a=this;H().fire({title:"Confirmation",html:"By creating a sheet, you are now finalizing your entries for this month and your record of transactions will be submitted for review and approval of the Office of Comptroller. Are you sure you want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Proceed."}).then((function(s){if(s.isConfirmed){var n={sheet_fund_type:"sr",month_year:e,fs_id:$("#inp_fund_source").val(),remarks:$("#txt_remarks").val()};t.postRequest("sdor/create-sheet-sr",n,(function(e){a.clearInputFields(),a.reloadSheetTable(),a.showSuccessAlert("Successfully created a sheet")}))}}))},deleteRecord:function(e){var t=this,a=this;H().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(s){s.isConfirmed&&t.postRequest("sdor/delete-sheet/"+e,{},(function(e){a.reloadSheetTable(),a.showSuccessAlert("Successfully deleted the sheet!")}))}))},reloadSheetTable:function(){$("#tbl_SR_sheets").DataTable().destroy(),this.getSRSheets()},clearInputFields:function(){$("#txt_remarks").val(""),$("#inp_fund_source").val(""),$(".select2-single").select2().val(0).trigger("change"),$("#inpMonthYearTransact").val("")}}};const K=(0,a(3744).Z)(Z,[["render",function(e,t,a,$,N,H){var I=(0,s.up)("C_Layout_Header"),V=(0,s.up)("C_Layout_SDOR_Sidebar");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(I),(0,s.Wm)(V),(0,s._)("section",i,[l,(0,s._)("div",r,[o,(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("div",u,[h,f,(0,s._)("div",p,[(0,s._)("div",_,[(0,s._)("div",b,[v,(0,s._)("div",g,[(0,s.wy)((0,s._)("select",{class:"select2-single form-control",id:"inp_fund_source","onUpdate:modelValue":t[0]||(t[0]=function(e){return N.iSelectedFs=e})},[m,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.aFundSourceList,(function(e){return(0,s.wg)(),(0,s.iD)("option",{value:e.fs_id},(0,s.zw)(e.fs_dv_no)+" ("+(0,s.zw)(e.fs_desc)+") ",9,S)})),256))],512),[[s.bM,N.iSelectedFs]])]),y])])])])]),(0,s._)("div",w,[(0,s._)("div",x,[R,T,(0,s._)("div",C,[(0,s._)("table",D,[k,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(N.aSRsheets,(function(t){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",Y,(0,s.zw)(t.temp_id),1),(0,s._)("td",E,(0,s.zw)(null===t.sheet_no?"---":t.sheet_no),1),(0,s._)("td",M,(0,s.zw)(e.convertDateFormat(t.transact_year+"-"+t.transact_month,"MMMM YYYY")),1),(0,s._)("td",L,(0,s.zw)(t.status),1),(0,s._)("td",B,(0,s.zw)(t.date_created),1),(0,s._)("td",P,[(0,s._)("button",{type:"button","data-attr":"viewDetails","data-sheet_id":t.sheet_id,class:"btn btn-md btn-info viewDetails",style:{"margin-right":"9%"}},[q,(0,s.Uk)(" View Details ")],8,F),"OPEN"===t.status?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button","data-attr":"deleteSheet","data-sheet_id":t.sheet_id,class:"btn btn-md btn-danger deleteSheet"},[A,(0,s.Uk)(" Delete ")],8,z)):((0,s.wg)(),(0,s.iD)("button",O,[U,(0,s.Uk)(" Delete ")]))])])})),256))])])])])])])])])])}]])}}]);