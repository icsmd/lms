"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[326],{5266:(t,e,s)=>{s.d(e,{Z:()=>o});var a=s(381),i=s.n(a),r=s(860),n=s(475);const o={mixins:[r.Z,n.Z],data:function(){return{sUserType:this.$root.getUserType(),aTableConfig:{aoColumnDefs:[{bSortable:!0,aTargets:[-1]}],oLanguage:{oPaginate:{sPrevious:"",sNext:""}},iDisplayLength:5,aLengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],sDom:'<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',oTableTools:{sSwfPath:"vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf"}},aFundTypes:[{id:1,code:"ps",desc:"Personnel Services (PS)"},{id:2,code:"mooe",desc:"Maintenance and Other Operating Expenses (MOOE)"},{id:3,code:"sr",desc:"Special Requests (SR)"}],iSelectedFund:0,aFSList:[],aRegionList:[],aSheet:[],aSheetDetails:[],fTotalGrossAmount:0,fTotalTaxAmount:0,fTotalNetAmount:0,fTotalParticularAmount:0,sFundCode:"",sReportNo:"",sSheetNo:"",sTitleDate:"",sCurrDate:i()().format("DD-MMM-YYYY"),sCompressedSummary:"",aFundSource:[],aSheetRecap:[],aSheetSummary:[],fSumOfSWReg:0,fSumOfSWCas:0,fSumOfOffice:0,fSumOfOthers:0,sReportType:"",sReportDetailsUrl:"",sPrintPageUrl:""}},mounted:function(){this.initializePlugins(),this.initEventListeners(),this.getFundSourceList(),this.executeUserTypeRequests()},methods:{initializePlugins:function(t){$(".select2-single").select2(),$("#inpMonthYearTransact").monthpicker({changeYear:!1,stepYears:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',showButtonPanel:!0,beforeShow:function(t,e){var s=$(this).parents(".admin-form").attr("class");e.dpDiv.parent().hasClass(s)||e.dpDiv.wrap('<div class="'+s+'"></div>')}})},initTblSheets:function(){$("#tbl_cash_reg_summary").DataTable(this.aTableConfig)},initEventListeners:function(){var t=this;$("#inp_fund_type").on("select2:select",(function(t){"sr"===$("#inp_fund_type").val()?$("#divSRSelection").css("visibility",""):$("#divSRSelection").css("visibility","hidden")})),document.body.addEventListener("click",(function(e){e.preventDefault(),"btnGenReport"===e.target.id&&t.validateFilter(),"btnPrintReport"===e.target.id&&t.prepareReport()}),!1)},prepareReport:function(){var t=Object.assign({},this.aSheetDetails,{date_details:{title_date:this.sTitleDate,curr_date:this.sCurrDate}});this.sCompressedSummary=btoa(JSON.stringify(t)),this.$root.setLocalStorageValue("forEx",this.sCompressedSummary),window.open(this.sPrintPageUrl,"_blank")},validateFilter:function(){var t,e,s,a=!0,i=$("#inp_fund_type").val(),r=$("#inpMonthYearTransact").val();""===r&&(a=!1,this.showErrorAlert("Month-Year is Required!")),null==i?(a=!1,this.showErrorAlert("Type is Required!")):"sr"===i&&null==(e=$("#inp_sr").val())&&(a=!1,this.showErrorAlert("Request Reference is Required!")),"sdor"!==this.sUserType&&null==(s=$("#inp_office").val())&&(a=!1,this.showErrorAlert("Office is Required!")),!0===a&&(t={sheet_fund_type:i,transact_month:r.split("/")[0],transact_year:r.split("/")[1]},t="sr"===i?Object.assign({},t,{fs_id:e}):t,t="sdor"!==this.sUserType?Object.assign({},t,{region_id:s}):t,this.getDateValues(),this.getReportDetails(t))},getDateValues:function(){var t=$("#inpMonthYearTransact").val(),e=t.split("/")[0],s=t.split("/")[1],a=e+"-01-"+s,r=i()(a).endOf("month").format("DD");this.sTitleDate="01-"+r+" "+i()(a).format("MMMM")+" "+s},executeUserTypeRequests:function(){"sdor"!==this.sUserType&&($("#divInpOffice").css("visibility",""),this.getRegionList())},getRegionList:function(){this.aRegionList=this.$root.parseLocalStorageLib().regions},getReportDetails:function(t){var e=this;this.getRequest(this.sReportDetailsUrl,(function(t){var s=t.data;0===s.length?(e.resetDisplayTable(),e.showErrorAlert("No available data to load!"),$(".tbl-empty").css("display",""),$(".tbl-with-content").css("display","none"),$("#btnPrintReport").attr("disabled",!0),$("#btnPrintReport").attr("class","btn btn-default btn-gradient dark btn-lg")):($(".tbl-with-content").css("display",""),$(".tbl-empty").css("display","none"),$("#btnPrintReport").attr("disabled",!1),$("#btnPrintReport").attr("class","btn btn-success btn-gradient dark btn-lg"),e.aSheetDetails=s,e.reportLayoutSetter(s))}),t)},resetDisplayTable:function(){this.aSheetDetails=[],this.fTotalGrossAmount=0,this.fTotalTaxAmount=0,this.fTotalNetAmount=0,this.fTotalParticularAmount=0},reportLayoutSetter:function(t){this.sTitleDate=void 0===t.date_details?this.sTitleDate:t.date_details.title_date,this.sCurrDate=void 0===t.date_details?this.sCurrDate:t.date_details.curr_date,"cash-reg-report"===this.sReportType?(this.sReportNo=t.sheet_details.report_no,this.sSheetNo=t.sheet_details.sheet_no,this.sFundCluster=t.sheet_details.fund_desc+" ("+t.sheet_details.fund_code+")",this.computeTotalAmount()):"cash-reg-record"===this.sReportType?(this.aFundSource=t.fund_source[0],this.aSheetRecap=t.sheet_recap,this.aSheetSummary=t.sheet_summary):"cash-reg-register"===this.sReportType?(this.aFundSource=t.fund_source[0],this.aSheetRecap=t.sheet_recap,this.aSheetSummary=t.sheet_summary,this.computeSummation()):"cash-reg-liquidation"===this.sReportType&&(this.aSheetSummary=t.sheet_summary)},getFundSourceList:function(){var t=this;this.getRequest("fund-source/get-list",(function(e){t.aFSList=e.data}),{fs_type:"sr",fs_status:"RELEASED"})},computeTotalAmount:function(){var t=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.net_amount)}),0),e=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.tax_amount)}),0),s=this.aSheetDetails.sheet_entries.reduce((function(t,e){return t+parseFloat(e.gross_amount)}),0),a=this.aSheetDetails.sheet_recap.reduce((function(t,e){return t+parseFloat(e.total_amount)}),0);this.fTotalGrossAmount=s.toFixed(2),this.fTotalTaxAmount=e.toFixed(2),this.fTotalNetAmount=t.toFixed(2),this.fTotalParticularAmount=a.toFixed(2)},computeSummation:function(t){var e=this;this.aSheetDetails.sheet_entries.forEach((function(t){"5-01-010-1000"===t.uacs_code?e.fSumOfSWReg+=parseFloat(t.net_amount):"5-01-010-2000"===t.uacs_code?e.fSumOfSWCas+=parseFloat(t.net_amount):"5-02-03-010"===t.uacs_code?e.fSumOfOffice+=parseFloat(t.net_amount):e.fSumOfOthers+=parseFloat(t.net_amount)}))},parseCompressedData:function(){var t=this.$root.getLocalStorageValue("forEx");this.aSheetDetails=JSON.parse(atob(t)),this.reportLayoutSetter(this.aSheetDetails)},printReport:function(){var t=document.getElementById("printableDiv").outerHTML,e=document.body.innerHTML;document.body.innerHTML=t,window.print(),document.body.innerHTML=e}}}},3326:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var a=s(821),i={id:"content_wrapper"},r=(0,a.uE)('<header id="topbar" class="alt"><div class="topbar-left"><ol class="breadcrumb"><li class="crumb-trail"> Other Reports (Non-Standard) </li><li class="crumb-active"><a>Accumulated Expenses</a></li></ol></div></header>',1),n={class:"panel"},o=(0,a._)("div",{class:"panel-heading"},[(0,a._)("span",{class:"panel-title"}," Accumulated Expenses Report ")],-1),l={class:"panel-body"};const u={mixins:[s(5266).Z]};const c=(0,s(3744).Z)(u,[["render",function(t,e,s,u,c,d){var h=(0,a.up)("C_Layout_Header"),p=(0,a.up)("C_Layout_SDOR_Sidebar"),f=(0,a.up)("C_Layout_ACTG_Sidebar"),m=(0,a.up)("C_WebDevInProgress");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(h),"sdor"===t.sUserType?((0,a.wg)(),(0,a.j4)(p,{key:0})):"actg"===t.sUserType?((0,a.wg)(),(0,a.j4)(f,{key:1})):(0,a.kq)("",!0),(0,a._)("section",i,[r,(0,a._)("div",n,[o,(0,a._)("div",l,[(0,a.Wm)(m)])])])],64)}]])}}]);