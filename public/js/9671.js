"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9671],{9671:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ie});var s=a(821),n={id:"main"},l={id:"content_wrapper"},i=(0,s.uE)('<header id="topbar" class="alt"><div class="topbar-left"><ol class="breadcrumb"><li class="crumb-trail"> Cash Management </li><li class="crumb-trail"> Manage Sheet </li><li class="crumb-active"><a>Special Requests</a></li></ol></div></header>',1),r={class:"panel"},o=(0,s._)("div",{class:"panel-heading"},[(0,s._)("span",{class:"panel-title"},"Manage Cash Disbursement Sheets for Special")],-1),c={class:"panel-body"},d={class:"col-md-12"},u={class:"panel panel-colorbox-open panel-system",id:"spy2"},h=(0,s._)("br",null,null,-1),p=(0,s._)("div",{class:"panel-heading"},[(0,s._)("div",{class:"panel-title hidden-xs"},[(0,s._)("span",{class:"fa fa-plus-square-o"}),(0,s.Uk)("Create SR Sheet ")])],-1),f={class:"panel-body pn"},b={class:"form-group",id:"divInpTransactMY",style:{margin:"1%"}},_={class:"admin-form mw1000 left-block"},m=(0,s.uE)('<div class="col-md-5 section"><label class="field prepend-icon"><textarea class="gui-textarea" id="txt_remarks" name="comment" placeholder="Enter your remarks here..."></textarea><label for="comment" class="field-icon"><i class="fa fa-comments"></i></label><span class="input-footer"><strong>Hint: </strong>Provide a short description about this sheet. (Optional)</span></label></div>',1),v={class:"col-md-4"},g=(0,s._)("option",{disabled:"",value:"0",selected:""},"Please select ORS/BURS/DV No.",-1),S=["value"],y=(0,s.uE)('<div class="col-md-3"><label for="monthpicker1" class="field prepend-icon"><input type="text" id="inpMonthYearTransact" name="inpMonthYearTransact" class="gui-input" placeholder="Enter month and year" readonly><label class="field-icon"><i class="fa fa-calendar-o"></i></label></label><button id="btnSRCreateSheet" type="button" class="btn btn-system btn-gradient dark btn-block" style="margin-top:5%;"><i class="fa fa-plus-square-o"></i> Create Sheet (SR) </button></div>',1),w={class:"col-md-12"},x={class:"panel panel-colorbox-open panel-primary",id:"spy2"},D=(0,s._)("div",{class:"panel-heading"},[(0,s._)("div",{class:"panel-title hidden-xs"},[(0,s._)("span",{class:"fa fa-refresh"}),(0,s.Uk)("Filter Data ")])],-1),T={class:"panel-body pn"},R={style:{margin:"1%"}},Y=(0,s.uE)('<div class="col-md-3" style="margin-bottom:1%;"><div class="admin-form mw1000 center-block"><label for="inp_status" style="margin-bottom:2%;"><b>Date Created:</b></label><label for="monthpicker1" class="field prepend-icon"><input type="text" id="inpMonthYearTransactFilter" name="inpMonthYearTransactFilter" class="gui-input" placeholder="Enter month and year" readonly style="height:38px;"><label class="field-icon"><i class="fa fa-calendar-o"></i></label></label></div></div>',1),k={class:"col-md-2"},M={class:"admin-form mw1000 center-block"},C=(0,s._)("label",{for:"inp_status",style:{"margin-bottom":"2%"}},[(0,s._)("b",null,"Status:")],-1),E={class:"select2-single form-control status-select",id:"inp_status"},F=(0,s._)("option",{value:"",selected:""},"ALL",-1),q=["value"],L=(0,s._)("div",{class:"col-md-3",style:{"margin-bottom":"1%"}},[(0,s._)("div",{class:"admin-form mw1000 center-block"},[(0,s._)("button",{id:"btnFilterData",type:"button",class:"btn btn-primary btn-gradient dark btn-md",style:{"margin-top":"19px"}},[(0,s._)("i",{class:"fa fa-refresh"}),(0,s.Uk)(" Â Filter ")])])],-1),P={class:"col-md-12"},B={class:"panel panel-colorbox-open panel-dark",id:"spy2"},O=(0,s._)("br",null,null,-1),A=(0,s._)("div",{class:"panel-heading"},[(0,s._)("div",{class:"panel-title hidden-xs"},[(0,s._)("span",{class:"glyphicon glyphicon-tasks"}),(0,s.Uk)("Cash Disbursement Sheets for Special Requests ")])],-1),z={class:"panel-body pn"},U={class:"table table-striped table-hover",id:"tbl_SR_sheets",cellspacing:"0",width:"100%"},V=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{style:{"text-align":"center"}},"SysId"),(0,s._)("th",{style:{"text-align":"center"}},"Sheet No"),(0,s._)("th",{style:{"text-align":"center"}},"Accounting Period"),(0,s._)("th",{style:{"text-align":"center"}},"Status"),(0,s._)("th",{style:{"text-align":"center"}},"Date Created"),(0,s._)("th",{style:{"text-align":"center"}},"Action")])],-1),I={style:{"text-align":"center"}},N={style:{"text-align":"center"}},H={style:{"text-align":"center"}},K={style:{"text-align":"center"}},Z={style:{"text-align":"center"}},W={style:{"text-align":"center"}},j=["data-sheet_id"],G=(0,s._)("i",{class:"fa fa-arrow-circle-o-right"},null,-1),J=["data-sheet_id"],Q=(0,s._)("i",{class:"fa fa-trash"},null,-1),X={key:1,type:"button",class:"btn btn-md btn-default",disabled:""},ee=(0,s._)("i",{class:"fa fa-trash"},null,-1);var te=a(6455),ae=a.n(te),se=a(860),ne=a(475);const le={mixins:[se.Z,ne.Z],data:function(){return{bSRSheetExist:!1,aTableConfig:{aaSorting:[[0,"desc"]],aoColumnDefs:[{bSortable:!1,aTargets:[5]}],oLanguage:{oPaginate:{sPrevious:"",sNext:""}},iDisplayLength:10,aLengthMenu:[[5,10,25,50,-1],[5,10,25,50,"All"]],sDom:'<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',oTableTools:{sSwfPath:"vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf"}},aPSsheets:[],aMOOEsheets:[],aSRsheets:[],aFundSourceList:[],iSelectedFs:0,aSheetStatuses:[{id:"OPEN",desc:"Open"},{id:"FOR REVISION",desc:"For Revision"},{id:"REVISED",desc:"Revised"},{id:"POSTED",desc:"Posted"}],sActiveDate:"",sSelectedMonth:"",sSelectedYear:"",sSelectedStatus:""}},mounted:function(){this.initializePlugins(),this.getFundSourceList(),this.initPageValues(),this.getSRSheets(),this.initEventListener()},methods:{initializePlugins:function(){$(".select2-single").select2(),$(".status-select").select2(),$("#inpMonthYearTransact").monthpicker({changeYear:!1,stepYears:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',showButtonPanel:!0,beforeShow:function(e,t){var a=$(this).parents(".admin-form").attr("class");t.dpDiv.parent().hasClass(a)||t.dpDiv.wrap('<div class="'+a+'"></div>')}}),$("#inpMonthYearTransactFilter").monthpicker({changeYear:!1,stepYears:1,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',showButtonPanel:!0,beforeShow:function(e,t){var a=$(this).parents(".admin-form").attr("class");t.dpDiv.parent().hasClass(a)||t.dpDiv.wrap('<div class="'+a+'"></div>')}})},initEventListener:function(){var e=this;document.body.addEventListener("click",(function(t){t.preventDefault(),"btnSRCreateSheet"===t.target.id&&e.validateSheetCreation(),"btnFilterData"===t.target.id&&e.getSRSheets()}),!1)},validateSheetCreation:function(){var e=$("#inpMonthYearTransact").val();null===$("#inp_fund_source").val()?this.showErrorAlert("The ORS/BURS/DV No. is Required!"):""===e?this.showErrorAlert("Month and Year is Required!"):this.createSheet(e)},initTblSRSheets:function(){$("#tbl_SR_sheets").DataTable(this.aTableConfig),$(".dataTables_filter input").attr("placeholder","Enter Terms...")},initTableEventListener:function(){var e=this;document.body.addEventListener("click",(function(t){t.preventDefault(),"viewDetails"===t.target.dataset.attr&&(window.location.href="/front/sdor/view-sheet-details/"+t.target.dataset.sheet_id),"deleteSheet"===t.target.dataset.attr&&e.deleteRecord(t.target.dataset.sheet_id)}),!1)},getFundSourceList:function(){var e=this;this.getRequest("fund-source/get-list",(function(t){e.aFundSourceList=t.data}),{fs_type:"sr"})},initPageValues:function(){var e=(null!=this.$route.query.mn?this.$route.query.mn:moment().format("MM"))+"/"+(null!=this.$route.query.yr?this.$route.query.yr:moment().format("YYYY"));null!=this.$route.query.stat&&$(".status-select").select2().val(this.$route.query.stat).trigger("change"),$("#inpMonthYearTransactFilter").val(e)},preloadRequestValues:function(){var e=$("#inpMonthYearTransactFilter").val();this.sSelectedMonth=e.split("/")[0],this.sSelectedYear=e.split("/")[1];var t=this.sSelectedMonth+"-01-"+this.sSelectedYear;this.sActiveDate=moment(t).format("MMMM")+" "+this.sSelectedYear,this.sSelectedStatus=$("#inp_status").val()},getSRSheets:function(){var e=this,t=this;this.preloadRequestValues(),this.getRequest("sdor/get-sheets",(function(a){e.aSRsheets=a.data,!0===$.fn.dataTable.isDataTable("#tbl_SR_sheets")&&$("#tbl_SR_sheets").DataTable().destroy(),setTimeout((function(){t.initTblSRSheets()}),500),setTimeout((function(){t.initTableEventListener()}),500)}),{transact_month:this.sSelectedMonth,transact_year:this.sSelectedYear,status:this.sSelectedStatus,sheet_fund_type:"sr"})},createSheet:function(e){var t=this,a=this;ae().fire({title:"Confirmation",html:"By creating a sheet, you are now finalizing your entries for this month and your record of transactions will be submitted for review and approval of the Office of Comptroller. Are you sure you want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Proceed."}).then((function(s){if(s.isConfirmed){var n={sheet_fund_type:"sr",month_year:e,fs_id:$("#inp_fund_source").val(),remarks:$("#txt_remarks").val()};t.postRequest("sdor/create-sheet-sr",n,(function(e){a.clearInputFields(),a.reloadSheetTable(),a.showSuccessAlert("Successfully created a sheet")}))}}))},deleteRecord:function(e){var t=this,a=this;ae().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(s){s.isConfirmed&&t.postRequest("sdor/delete-sheet/"+e,{},(function(e){a.reloadSheetTable(),a.showSuccessAlert("Successfully deleted the sheet!")}))}))},reloadSheetTable:function(){$("#tbl_SR_sheets").DataTable().destroy(),this.getSRSheets()},clearInputFields:function(){$("#txt_remarks").val(""),$("#inp_fund_source").val(""),$(".select2-single").select2().val(0).trigger("change"),$("#inpMonthYearTransact").val("")}}};const ie=(0,a(3744).Z)(le,[["render",function(e,t,a,$,te,ae){var se=(0,s.up)("C_Layout_Header"),ne=(0,s.up)("C_Layout_SDOR_Sidebar");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(se),(0,s.Wm)(ne),(0,s._)("section",l,[i,(0,s._)("div",r,[o,(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("div",u,[h,p,(0,s._)("div",f,[(0,s._)("div",b,[(0,s._)("div",_,[m,(0,s._)("div",v,[(0,s.wy)((0,s._)("select",{class:"select2-single form-control",id:"inp_fund_source","onUpdate:modelValue":t[0]||(t[0]=function(e){return te.iSelectedFs=e})},[g,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(te.aFundSourceList,(function(e){return(0,s.wg)(),(0,s.iD)("option",{value:e.fs_id},(0,s.zw)(e.fs_dv_no)+" ("+(0,s.zw)(e.fs_desc)+") ",9,S)})),256))],512),[[s.bM,te.iSelectedFs]])]),y])])])])]),(0,s._)("div",w,[(0,s._)("div",x,[D,(0,s._)("div",T,[(0,s._)("div",R,[Y,(0,s._)("div",k,[(0,s._)("div",M,[C,(0,s._)("select",E,[F,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(te.aSheetStatuses,(function(e){return(0,s.wg)(),(0,s.iD)("option",{value:e.id},(0,s.zw)(e.desc),9,q)})),256))])])]),L])])])]),(0,s._)("div",P,[(0,s._)("div",B,[O,A,(0,s._)("div",z,[(0,s._)("table",U,[V,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(te.aSRsheets,(function(t){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",I,(0,s.zw)(t.temp_id),1),(0,s._)("td",N,(0,s.zw)(null===t.sheet_no?"---":t.sheet_no),1),(0,s._)("td",H,(0,s.zw)(e.convertDateFormat(t.transact_year+"-"+t.transact_month,"MMMM YYYY")),1),(0,s._)("td",K,(0,s.zw)(t.status),1),(0,s._)("td",Z,(0,s.zw)(t.date_created),1),(0,s._)("td",W,[(0,s._)("button",{type:"button","data-attr":"viewDetails","data-sheet_id":t.sheet_id,class:"btn btn-md btn-info viewDetails",style:{"margin-right":"9%"}},[G,(0,s.Uk)(" View Details ")],8,j),"OPEN"===t.status?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button","data-attr":"deleteSheet","data-sheet_id":t.sheet_id,class:"btn btn-md btn-danger deleteSheet"},[Q,(0,s.Uk)(" Delete ")],8,J)):((0,s.wg)(),(0,s.iD)("button",X,[ee,(0,s.Uk)(" Delete ")]))])])})),256))])])])])])])])])])}]])}}]);